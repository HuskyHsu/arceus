import { BossPokemon, Filter } from "@/models";
import { BASE_URL } from "@/utils";
import { Marker } from "./Marker";

interface MapProps {
  pmList: BossPokemon[];
  filter: Filter;
  updateKeywordFilter: Function;
}

export function MapDom({ pmList, filter, updateKeywordFilter }: MapProps) {
  const data = {
    "490": [
      [381.9, 422.8],
      [394.65, 443.04],
      [338.73, 479.64],
      [311.4, 469.03],
      [342.57, 439.6],
    ],
    "491": [
      [699, 566.3],
      [723.7, 536.7],
      [707.3, 590.4],
    ],
    "493": [
      [266.86, 832.41],
      [372.99, 799.48],
      [347.6, 906.2],
      [268.84, 896.95],
    ],
    "494": [
      [113.94, 706.48],
      [217.28, 881.95],
      [135.53, 752.35],
    ],
    "495": [
      [154, 674.22, 34.38],
      [172.33, 693.92, 29.77],
    ],
    "496": [
      [315.89, 924.75, 46.62],
      [352.32, 936.29, 47.2],
    ],
    "497": [[462.33, 946.21, 26.28]],
    "498": [
      [482.04, 943.54, 26.9],
      [506.87, 943.95, 26.86],
    ],
    "499": [
      [200.82, 577.54],
      [184.29, 556.84],
      [190.87, 542.63],
      [208.29, 539.35],
      [222.21, 558.46],
    ],
    "500": [
      [405.74, 811.27],
      [496.27, 857.33],
      [481.93, 863.79],
      [406.65, 884.07],
    ],
    "501": [[509.52, 871.59, 27.46]],
    "502": [
      [726.6, 816.96, 25.6],
      [695.27, 861.29, 29.64],
      [708.41, 850.53, 29.84],
    ],
    "503": [
      [715.24, 406.94, 67.5],
      [696.85, 406.33, 66.51],
      [731.27, 417.33, 70.28],
    ],
    "504": [
      [246.35, 617.91],
      [217.46, 631.72],
      [218.79, 603.53],
      [253.8, 563.5],
    ],
    "505": [
      [847.2, 212.8],
      [910.6, 165.8],
      [917, 170.3],
      [905.7, 199.4],
      [891.7, 211.7],
    ],
    "506": [
      [431.47, 923.83, 29.62],
      [439.97, 940.52, 29.25],
    ],
    "507": [
      [319.86, 805.87],
      [294.72, 768.8],
      [304.95, 743.44],
      [355.4, 774.9],
      [341.23, 792.96],
    ],
    "509": [
      [321.31, 188.47],
      [322.85, 173.24],
      [382.83, 264.66],
      [364.5, 249.3],
      [350.4, 234.8],
    ],
    "510": [
      [162.34, 560.97, 30.09],
      [181, 515.6, 31.27],
    ],
    "511": [
      [292.64, 831.97],
      [328.26, 848.53],
      [313.76, 858.2],
    ],
    "512": [
      [283.63, 202.51, 39.84],
      [276.04, 185.67, 39.91],
      [269.01, 203.49, 40.63],
    ],
    "513": [[337.57, 330.61, 79.04]],
    "514": [
      [441.42, 350.27],
      [582.61, 373.83],
      [582.43, 407.37],
      [457.56, 362.82],
    ],
    "516": [
      [145.05, 179.94, 46.38],
      [132.5, 198.9, 45.4],
    ],
    "517": [
      [261.62, 294.09],
      [178.42, 165.84],
      [187.5, 171.27],
      [277.86, 258.31],
    ],
    "518": [
      [336.3, 97.2, 28.2],
      [339, 109.98, 27.08],
    ],
    "519": [
      [209.24, 743.89, 27.89],
      [215.98, 763.21, 27.63],
    ],
    "520": [
      [123.84, 351.38],
      [156.25, 367.79],
      [167.27, 403.24],
      [153.23, 401.64],
    ],
    "521": [
      [452, 798.6, 26.8],
      [493.4, 807, 26.9],
    ],
    "522": [
      [705.7, 303],
      [676.99, 256.42],
      [682.87, 248.2],
      [714.36, 294.61],
    ],
    "524": [
      [149.33, 445.03, 65.97],
      [142.73, 457.07, 65.97],
    ],
    "527": [
      [144.87, 632.41, 39.09],
      [166.98, 636.75, 34.33],
      [181.21, 628.27, 32.08],
    ],
    "528": [
      [379.92, 335.61, 72.95],
      [355.29, 338.75, 72.28],
    ],
    "529": [
      [310.78, 338.58, 69.24],
      [326.25, 351.7, 73.22],
    ],
    "530": [
      [247.59, 777.31, 29.21],
      [246.53, 791.8, 28.29],
    ],
    "531": [
      [507.47, 425.33],
      [531.71, 428.42],
      [449.2, 457.2],
      [326.35, 485.55],
      [369.32, 463.44],
    ],
    "532": [
      [564.9, 877.4],
      [526.67, 812.49],
      [552.6, 820.4],
      [579.4, 881.2],
    ],
    "533": [
      [267.31, 357.52, 90.69],
      [246.93, 348.75, 90.5],
      [218.93, 396.45, 79.91],
    ],
    "534": [
      [572.6, 549.26, 26.69],
      [738.34, 582.97, 26.2],
      [742.43, 562.78, 26.2],
    ],
    "535": [
      [241.7, 176.87, 41.23],
      [241.82, 162.51, 41.81],
    ],
    "536": [[738.71, 842.25, 27.82]],
    "537": [[213.21, 157.72, 42.41]],
    "538": [
      [920.7, 800],
      [810.9, 731.3],
      [853.8, 680],
      [939.5, 704.7],
      [931.2, 769.2],
    ],
    "539": [
      [817.2, 454.3, 25.08334],
      [812.9, 421.9, 25.08334],
      [809.9, 389, 25.08334],
    ],
    "540": [
      [850.4, 304.2],
      [954.7, 382.4],
      [940.2, 396.7],
      [900.6, 395.3],
      [885.2, 380.7],
      [850.5, 345.7],
    ],
    "541": [
      [649.4, 292.2],
      [636.2, 262],
      [664.2, 259],
      [767.3, 271.6],
      [789, 301.3],
      [794.2, 312.7],
      [801.7, 336.5],
      [782.7, 346.2],
      [703.6, 372.2],
    ],
    "542": [
      [547.3, 186],
      [542.9, 133.5],
      [556.3, 94.5],
      [584.7, 107.7],
      [597.6, 147.5],
    ],
    "543": [
      [583.5, 714, 25.08333],
      [598.6, 696, 25.08333],
      [603.6, 717.8, 25.08333],
    ],
    "544": [[386.2, 60.2, 26.2]],
    "545": [
      [413.2, 605.9],
      [419.3, 496.6],
      [549.5, 475],
      [760.8, 472.5],
      [777.2, 485.4],
      [775.7, 511.7],
      [736, 746],
      [720.3, 754.9],
      [554.8, 771.2],
      [498.7, 764.8],
      [469.5, 754.2],
      [415.5, 640.6],
    ],
    "546": [
      [898.9, 847.2],
      [932.2, 856.9],
      [900.6, 913.7],
      [489.6, 980.2],
      [474.9, 975.3],
      [747.7, 879.4],
    ],
    "547": [
      [966.8, 569.7],
      [894.3, 562.7],
      [902.3, 525.3],
      [964.8, 530.2],
    ],
    "548": [
      [503.2, 692.7],
      [519.5, 555.2],
      [538.9, 571.2],
      [549.4, 592.7],
      [532.2, 684.7],
      [520.4, 698.3],
    ],
    "549": [
      [883.9, 479.6],
      [869.3, 458.7],
      [950.4, 458.3],
      [958.5, 475.6],
    ],
    "550": [
      [569.2, 995.9],
      [558.2, 985],
      [622.8, 957.2],
      [966, 885.8],
      [907, 948.2],
    ],
    "551": [
      [485.2, 177.2],
      [471.5, 145.2],
      [486.6, 118.4],
      [792.2, 40.5],
      [760.9, 69.2],
    ],
    "552": [
      [605.2, 467.3],
      [704.2, 453.3],
      [804.9, 507.2],
      [816.8, 640.6],
      [747.5, 639],
    ],
    "553": [
      [589.2, 459.5],
      [857.8, 522.6],
      [854.4, 626.4],
      [642.7, 784.7],
      [614.6, 781.5],
      [386.2, 707.3],
      [363.4, 692.6999],
      [323.5, 647.5],
      [324.5, 597.8],
      [335.5, 547.2],
    ],
    "554": [
      [516.6, 262.6],
      [659.9, 178.5],
      [633.4, 218.2],
      [554.8, 285.2],
    ],
    "555": [
      [641.2, 56.5],
      [613.4, 86.8],
      [410.7, 217.4],
      [399.2, 190.8],
      [388.2, 116.9],
      [572.6, 68.3],
    ],
    "556": [
      [994.9, 36.5],
      [952.3, 63.4],
      [408.5, 62],
      [394.2, 42.2],
      [928.7, 27.7],
    ],
    "557": [
      [250.44, 501],
      [256.7, 753.8],
      [233.82, 737.35],
      [206.84, 716.65],
      [196.22, 661.55],
      [229.39, 503.6],
    ],
    "558": [
      [447.22, 844.67, 27.87],
      [456.75, 859.27, 28.33],
    ],
    "560": [
      [502.07, 361.97],
      [326, 397.2],
      [368.49, 369.2],
      [490.28, 350.53],
    ],
    "561": [
      [113.66, 263.02, 47.01],
      [196.56, 320.29, 49.54],
      [120.09, 303.25, 46.25],
    ],
    "562": [
      [250.27, 132.97, 46.84],
      [275.53, 117.75, 48.66],
    ],
    "563": [
      [690.77, 861.64],
      [667.07, 869.48],
      [702.24, 832.7],
      [727.22, 815.05],
      [721.5, 845.47],
    ],
    "566": [
      [650.75, 828.2],
      [850.73, 743.41],
      [871.21, 773.46],
      [776.23, 809.88],
      [682.02, 844.31],
    ],
    "567": [
      [738.73, 808.59],
      [780.98, 829.53],
      [707.97, 862.77],
      [678.88, 865.28],
      [689.35, 835.86],
    ],
    "568": [[572.78, 533.07, 26.76]],
    "570": [[451.77, 428.64, 27.98]],
    "572": [
      [752.07, 129.26, 27.32],
      [766.2, 132.96, 28.54],
    ],
    "573": [
      [677.04, 396.78],
      [267.21, 426.26],
      [297.89, 391.98],
      [561.2, 353.8],
    ],
    "574": [
      [346.3, 844.96, 28.71],
      [361.64, 869.28, 28.78],
    ],
    "575": [
      [613.24, 932.43],
      [572, 919.66],
      [586.26, 828.26],
      [617.07, 836.34],
    ],
    "576": [
      [173.29, 814.46, 56.29],
      [206.29, 844.21, 55.54],
    ],
    "577": [
      [157.39, 522.82, 32.46],
      [148.09, 541.64, 32.09],
    ],
    "609": [[529, 329, 2]],
    "707": [[271.2, 470.6, 52.6]],
    "708": [[402.87, 844.2, 51.56]],
  };

  return (
    <div
      className="relative aspect-square bg-no-repeat bg-cover"
      style={{
        backgroundImage: `url(${BASE_URL}image/map/${filter.area}_LA.png)`,
        height: "100vmin",
      }}>
      {pmList.map((pm, i) => {
        return (
          <Marker
            key={i}
            pm={pm}
            selected={filter.keyword === String(i)}
            updateKeywordFilter={() => {
              updateKeywordFilter(String(i));
            }}
          />
        );
      })}
      <svg className="absolute w-full h-full" viewBox="0 0 1000 1000">
        {Object.entries(data).map(([key, value], i) => {
          if (value.length === 1) {
            return <circle key={key} cx={value[0][0]} cy={value[0][1]} r="8" />;
          }
          const points = [...value, value[0]]
            .map((row) => `${row[0]} ${row[1]}`)
            .join(",");

          // if (i === 0 || key === "541") {
          //   console.log(key);
          //   return <polygon key={key} points={points} />;
          // }

          return (
            <polygon key={key} points={points} fill="none" stroke="black" />
          );
        })}
      </svg>
    </div>
  );
}
